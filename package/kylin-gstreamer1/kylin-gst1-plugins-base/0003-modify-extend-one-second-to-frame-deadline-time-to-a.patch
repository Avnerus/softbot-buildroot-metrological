From 060a8dc241716dcbae0d68fba00a03dbd558e519 Mon Sep 17 00:00:00 2001
From: yaozenhu <yaozenhu@realtek.com>
Date: Thu, 2 Mar 2017 01:47:12 +0000
Subject: [PATCH 3/3] [modify] extend one second to frame deadline time to
 avoid drop frame [reviewer] Pual

Change-Id: Ibe7dcd9b69bc274d3dedaa6729de7050f35f61d4
---
 gst-libs/gst/video/gstvideodecoder.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/gst-libs/gst/video/gstvideodecoder.c b/gst-libs/gst/video/gstvideodecoder.c
index 068b25a..1b63dcf 100644
--- a/gst-libs/gst/video/gstvideodecoder.c
+++ b/gst-libs/gst/video/gstvideodecoder.c
@@ -3325,6 +3325,9 @@ gst_video_decoder_decode_frame (GstVideoDecoder * decoder,
       gst_segment_to_running_time (&decoder->input_segment, GST_FORMAT_TIME,
       frame->pts);
 
+  /* extend 1 second to deadline time*/
+  frame->deadline += GST_SECOND;
+
   /* do something with frame */
   ret = decoder_class->handle_frame (decoder, frame);
   if (ret != GST_FLOW_OK)
-- 
2.7.4

